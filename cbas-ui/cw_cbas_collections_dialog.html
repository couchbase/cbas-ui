<!--
Copyright 2020-Present Couchbase, Inc.

Use of this software is governed by the Business Source License included in
the file licenses/BSL-Couchbase.txt.  As of the Change Date specified in that
file, in accordance with the Business Source License, use of this software will
be governed by the Apache License, Version 2.0, included in the file
licenses/APL2.txt.
-->

<div class="dialog-med">
  <div class="panel-header">
    <h2 ng-show="options.is_new" class="ellipsis margin-right-1">Add Collection</h2>
    <h2 ng-show="!options.is_new">Collection Details</h2>
  </div>
  <form class="forms" name="datasetForm">
    <div class="panel-content">
      <div class="error error-form">
        <div ng-repeat="error in errors">
          Attention: {{error}}
        </div>
      </div>
      <div class="formrow">
        <label for="cluster_reference_name">
          Collection Name
        </label>
        <input ng-model="options.collectionName" type="text" autocorrect="off"
           spellcheck="false" autocapitalize="off" required>
      </div>
        <label class="margin-bottom-0">{{label}}&nbsp;<small *ngIf="compat.atLeast70">database.scope</small></label>
          <select id="link_type" ng-model="options.databaseName" ng-disabled="!options.is_new" required class="inline fix-width-2 margin-right-quarter">
            <!-- ng for loop for option -->
         <option ng-repeat="item in options.databases" value="{{item}}">{{item}}</option>
        </select>
        <select id="link_type" ng-model="options.scopeName" ng-disabled="!options.is_new" required class="inline fix-width-2 margin-right-quarter">
            <!-- ng for loop for option -->
         <option ng-repeat="item in options.dataverses" value="{{item}}">{{item}}</option>
        </select>
        <input id="for-dont-save" type="checkbox" ng-model="options.isAutoGenerated">
        <label for="for-dont-save" class="checkbox inline margin-right-zero">Auto Generate UUID</label>      
      </div>
      <section ng-show="!options.isAutoGenerated" class="width-12">
        <div style="padding-left: 10px;">
          <h4 class="margin-top-1">Primary Key(s)</h4>
        </div>
        <div ng-repeat="field in options.fields track by $index" style="display: flex; align-items: flex-start; justify-content:flex-start; margin: 10px;" >
          <div style="display: flex; align-items: flex-start; justify-content: space-between; padding-right: 10px; width: 185px;">
            <label for="cluster_reference_name"  >Name</label>
            <input ng-model="field.name"  type="text" autocorrect="off"
               spellcheck="false" autocapitalize="off" class="fix-width-2" >
          </div>
          <div style="display: flex; align-items: flex-start; justify-content: space-between; padding-right: 10px; width: 130px;">
            <label for="cluster_reference_name"  >Type</label>
            <select id="link_type" ng-model="field.type" ng-disabled="!options.is_new" style="width: auto;" >
              <!-- ng for loop for option -->
            <option value="int">int</option>
            <option value="double">double</option>
            <option value="string">string</option>
          </select>
          </div>
        <button type="button" ng-show="options.fields.length > 1" ng-click="deleteField($index)">X</button>
        </div>
      </section>

      <button ng-show="!options.isAutoGenerated" ng-click="addField()" ng-if="options.is_new" type="button" class="outline">Add Field</button>

    <div class="panel-footer">
      <a ng-if="options.is_new" ng-click="$dismiss('cancel')">Cancel</a>
      <button ng-disabled="datasetForm.$invalid" ng-if="options.is_new" type="submit" ng-click="$close('ok')">Save</button>

      <div ng-if="!options.is_new" class="row width-12">
        <button class="outline"  ng-click="$close('close')">Close Dialog</button>
      </div>
    </div>
  </form>
</div>
